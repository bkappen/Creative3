{"filter":false,"title":"index.js","tooltip":"/creative6/routes/index.js","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":1,"column":30},"end":{"row":6,"column":15},"action":"insert","lines":["","var mongodb = require('mongodb');","","var MongoClient = mongodb.MongoClient;","var dbUrl = \"mongodb://localhost:27017/\";","var collection;"],"id":2,"ignore":true},{"start":{"row":10,"column":0},"end":{"row":10,"column":2},"action":"insert","lines":["  "]},{"start":{"row":13,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["router.post(\"/newPic\", function(req, res, next) {","    MongoClient.connect(dbUrl, { useNewUrlParser: true }, function(err, client) {","        if (err) {","            console.log('Unable to connect to the mongoDB server. Error:', err);","        }","        else {","            console.log('Connection established to', dbUrl);","            var db = client.db('data');","            db.createCollection('images', function(err, result) {","                collection = result;","                collection.stats(function(err, stats) {","                    if (err) { console.log(err) }","                    if (stats.count == 0) { // If we havent inserted before, put the default in","                        collection.insert(image, function(err, result) {","                            if (err) { console.log(err) }","                            else { console.log('Created new image table'); }","                        });","                    }","                    else {","                        collection.insertOne(image, function(err, result) {","                            if (err) {","                                console.log(err);","                            }","                            else {","                                console.log('Inserted new image');","                            }","                        });","                    }","                });","                if (err) { console.log(err) }","            });","        }","    });","})","",""]}],[{"start":{"row":1,"column":30},"end":{"row":6,"column":15},"action":"remove","lines":["","var mongodb = require('mongodb');","","var MongoClient = mongodb.MongoClient;","var dbUrl = \"mongodb://localhost:27017/\";","var collection;"],"id":3,"ignore":true},{"start":{"row":5,"column":0},"end":{"row":5,"column":2},"action":"remove","lines":["  "]},{"start":{"row":8,"column":0},"end":{"row":43,"column":0},"action":"remove","lines":["router.post(\"/newPic\", function(req, res, next) {","    MongoClient.connect(dbUrl, { useNewUrlParser: true }, function(err, client) {","        if (err) {","            console.log('Unable to connect to the mongoDB server. Error:', err);","        }","        else {","            console.log('Connection established to', dbUrl);","            var db = client.db('data');","            db.createCollection('images', function(err, result) {","                collection = result;","                collection.stats(function(err, stats) {","                    if (err) { console.log(err) }","                    if (stats.count == 0) { // If we havent inserted before, put the default in","                        collection.insert(image, function(err, result) {","                            if (err) { console.log(err) }","                            else { console.log('Created new image table'); }","                        });","                    }","                    else {","                        collection.insertOne(image, function(err, result) {","                            if (err) {","                                console.log(err);","                            }","                            else {","                                console.log('Inserted new image');","                            }","                        });","                    }","                });","                if (err) { console.log(err) }","            });","        }","    });","})","",""]}],[{"start":{"row":1,"column":30},"end":{"row":6,"column":15},"action":"insert","lines":["","var mongodb = require('mongodb');","","var MongoClient = mongodb.MongoClient;","var dbUrl = \"mongodb://localhost:27017/\";","var collection;"],"id":4,"ignore":true},{"start":{"row":10,"column":0},"end":{"row":10,"column":2},"action":"insert","lines":["  "]},{"start":{"row":13,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["router.post(\"/newPic\", function(req, res, next) {","    MongoClient.connect(dbUrl, { useNewUrlParser: true }, function(err, client) {","        if (err) {","            console.log('Unable to connect to the mongoDB server. Error:', err);","        }","        else {","            console.log('Connection established to', dbUrl);","            var db = client.db('data');","            db.createCollection('images', function(err, result) {","                collection = result;","                collection.stats(function(err, stats) {","                    if (err) { console.log(err) }","                    if (stats.count == 0) { // If we havent inserted before, put the default in","                        collection.insert(image, function(err, result) {","                            if (err) { console.log(err) }","                            else { console.log('Created new image table'); }","                        });","                    }","                    else {","                        collection.insertOne(image, function(err, result) {","                            if (err) {","                                console.log(err);","                            }","                            else {","                                console.log('Inserted new image');","                            }","                        });","                    }","                });","                if (err) { console.log(err) }","            });","        }","    });","})","",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":49,"column":0},"end":{"row":49,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":43,"mode":"ace/mode/javascript"}},"timestamp":1544479467106,"hash":"1a99698d96766ea4daeaf5a779f902b9503e571b"}